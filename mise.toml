# mise configuration for fahrenheight project
# https://mise.jdx.dev/

[tools]
node = "22"

[env]
NODE_ENV = "development"

[tasks.dev]
description = "Start development server"
run = "pnpm exec vite dev"

[tasks.dev-open]
description = "Start development server and open browser"
run = "pnpm exec vite dev --open"

[tasks.build]
description = "Build static site for production"
run = "pnpm exec vite build"

[tasks.preview]
description = "Preview production build locally"
run = "pnpm exec vite preview"

[tasks.check]
description = "Type-check with svelte-check"
run = "pnpm exec svelte-kit sync && pnpm exec svelte-check --tsconfig ./tsconfig.json"

[tasks.check-watch]
description = "Type-check with svelte-check in watch mode"
run = "pnpm exec svelte-kit sync && pnpm exec svelte-check --tsconfig ./tsconfig.json --watch"

[tasks.lint]
description = "Lint and check code with ESLint and Prettier (no fixes)"
run = "pnpm exec prettier --check . && pnpm exec eslint ."

[tasks."lint:check"]
description = "Check code with ESLint and Prettier (alias for lint)"
run = "pnpm exec prettier --check . && pnpm exec eslint ."

[tasks.format]
description = "Format code with Prettier (write changes)"
run = "pnpm exec prettier --write ."

[tasks."format:check"]
description = "Check code formatting with Prettier (no changes)"
run = "pnpm exec prettier --check ."

[tasks.test]
description = "Run all tests (unit + e2e)"
run = "pnpm exec vitest --run && pnpm exec playwright test"

[tasks.test-unit]
description = "Run unit tests with Vitest"
run = "pnpm exec vitest"

[tasks.test-e2e]
description = "Run E2E tests with Playwright"
run = "pnpm exec playwright test"

[tasks.install]
description = "Install dependencies"
run = "pnpm install"

[tasks.sync]
description = "Sync SvelteKit types"
run = "pnpm exec svelte-kit sync || echo ''"

[tasks.ci]
description = "Run CI checks (lint, type-check, test)"
depends = ["lint:check", "format:check", "check", "test"]
